<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>ç³»ç»Ÿé¦–é¡µ</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="shortcut icon" th:href="@{/static/favicon.ico}" type="image/x-icon">
    <link rel="stylesheet" th:href="@{/static/layuiadmin/layui/css/layui.css}" media="all">
    <link rel="stylesheet" th:href="@{/static/layuiadmin/style/admin.css}" media="all">
    <link rel="stylesheet" th:href="@{/static/css/index.css}" media="all">
    <script th:src="@{/static/js/echarts.js}" type="text/javascript"></script>
    <script th:src="@{/static/js/macarons.js}" type="text/javascript"></script>
    <script>
        /^http(s*):\/\//.test(location.href) || alert('è¯·å…ˆéƒ¨ç½²åˆ° localhost ä¸‹å†è®¿é—®');
    </script>
</head>
<body>
<div class="layui-fluid layui-anim" id="bml-index" lay-title="ç³»ç»Ÿé¦–é¡µ">
    <div class="layui-row layui-col-space8">
        <div class="layui-col-md12 layui-col-sm12 layui-col-xs12">
            <div class="layui-card">
                <div class="layui-card-body layui-anim layui-anim-fadein">
                    <div class="layui-row welcome-info">
                        <div class="layui-col-md8 layui-col-sm12 layui-col-xs12">
                            <div class="layui-row welcome-info-wrapper">
                                <div class="user-header" id="avatar">
                                    <img alt="" id="user-avatar" th:src="@{/static/images/{avatar}(avatar=${user.avatar})}" src="">
                                </div>
                                <div class="user-info">
                                    <div class="layui-row">
                                        <div class="random-message">
                                            <span>äº²çˆ±çš„ <a style="color: cyan"> <span th:text="${user.getNickname()}"></span></a> ï¼Œä½ å¥½å•Šï¼</span>
                                        </div>
                                        <div class="user-dept">
                                            <span id="user-dept"></span>è¿™ä¸€å—ä¸çŸ¥é“æ˜¯å¹²ä»€ä¹ˆçš„ | <span th:text="${user.getRoleId()} == 1?'è¶…çº§ç®¡ç†å‘˜':'æ™®é€šç”¨æˆ·'">ç”¨æˆ·è§’è‰²å</span>
                                        </div>
                                        <div class="user-login-info">
                                            ä¸Šæ¬¡ç™»å½•æ—¶é—´ : <span th:text="${#dates.format(user.getLastTime(),'yyyyå¹´MMæœˆddæ—¥ HHæ—¶mmåˆ†ssç§’')}">æ—¶é—´</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-md4 layui-col-sm12 layui-col-xs12">
                            <div class="layui-col-md-offset5">
                                <table class="login-count-table">
                                    <tr>
                                        <td>ä»Šæ—¥è®¿é—®</td>
                                        <td>æ€»è®¿é—®é‡</td>
                                    </tr>
                                    <tr>
                                        <td class="count" id="today-visit-count">
                                            <span th:text="${todayCount}">ä»Šæ—¥è®¿é—®</span>
                                        </td>
                                        <td class="count" id="total-visit-count">
                                            <span th:text="${count}">æµè§ˆæ€»æ•°</span>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="layui-col-md6 layui-col-sm6 layui-col-xs12">
            <div class="layui-card">
                <div class="layui-card-header">æœ€è¿‘10å¤©ç³»ç»Ÿè®¿é—®è®°å½•</div>
                <div class="layui-card-body">
                    <div id="leftChart" style="height: 355px;width: 570px;margin-left: -10px;margin-bottom: -15px"></div>
                </div>
            </div>
        </div>

        <!--å³ä¾§æ­£åœ¨è¿›è¡Œä¸­çš„é¡¹ç›® å……æ•°çš„-->
        <div class="layui-col-md6 layui-col-sm6 layui-col-xs12">

            <div class="layui-card">
                <div class="layui-card-body">
                    <table class="project-table">
                        <tr>
                            <td style="padding: .8rem;">å……æ•°çš„</td>
                            <td style="padding: .8rem;text-align: right">
                                <a target="_blank" href="https://github.com/wuyouzhuguli?tab=repositories">æ‰€æœ‰é¡¹ç›®</a>
                            </td>
                        </tr>
                        <tr>
                            <td class="project-table-td">
                                <div class="layui-row">
                                    <div class="layui-col-md12 layui-col-xs12">
                                        <div class="layui-row">
                                            <div class="layui-col-md12">
                                                <a target="_blank" href="https://github.com/wuyouzhuguli/FEBS-Shiro">FEBS
                                                    Shiro</a>
                                            </div>
                                            <div class="project-desc">
                                                Spring Boot 2.0.4 & Shiro1.4.0 æƒé™ç®¡ç†ç³»ç»Ÿã€‚
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                            <td class="project-table-td">
                                <div class="layui-row">
                                    <div class="layui-col-md12 layui-col-xs12">
                                        <div class="layui-row">
                                            <div class="layui-col-md12">
                                                <a target="_blank" href="https://github.com/wuyouzhuguli/FEBS-Security">FEBS
                                                    Security</a>
                                            </div>
                                            <div class="project-desc">
                                                Spring Boot 2.0.4 & Spring Security 5.0.7 æƒé™ç®¡ç†ç³»ç»Ÿã€‚
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="project-table-td">
                                <div class="layui-row">
                                    <div class="layui-col-md12 layui-col-xs12">
                                        <div class="layui-row">
                                            <div class="layui-col-md12">
                                                <a target="_blank" href="https://github.com/wuyouzhuguli/FEBS-Vue">FEBS
                                                    Vue</a>
                                            </div>
                                            <div class="project-desc">
                                                FEBS-Shiroå‰åç«¯åˆ†ç¦»ç‰ˆæœ¬ï¼Œå‰ç«¯æ¶æ„é‡‡ç”¨Vueå…¨å®¶æ¡¶ã€‚
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                            <td class="project-table-td">
                                <div class="layui-row">
                                    <div class="layui-col-md12 layui-col-xs12">
                                        <div class="layui-row">
                                            <div class="layui-col-md12">
                                                <a target="_blank" href="https://github.com/wuyouzhuguli/FEBS-Actuator">FEBS
                                                    Actuator</a>
                                            </div>
                                            <div class="project-desc">
                                                ä½¿ç”¨Spring Boot Admin 2.0.2æ„å»ºï¼Œç”¨äºç›‘æ§FEBSã€‚
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="project-table-td">
                                <div class="layui-row">
                                    <div class="layui-col-md12 layui-col-xs12">
                                        <div class="layui-row">
                                            <div class="layui-col-md12">
                                                <a target="_blank" href="https://github.com/wuyouzhuguli/SpringAll">SpringAll</a>
                                            </div>
                                            <div class="project-desc">
                                                å¾ªåºæ¸è¿›å­¦ä¹ Spring Bootã€Spring Cloudä¸Spring Securityã€‚
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                            <td class="project-table-td">
                                <div class="layui-row">
                                    <div class="layui-col-md12 layui-col-xs12">
                                        <div class="layui-row">
                                            <div class="layui-col-md12">
                                                <a target="_blank" href="https://github.com/wuyouzhuguli/Conciseness">Conciseness</a>
                                            </div>
                                            <div class="project-desc">
                                                Leanoteåšå®¢ä¸»é¢˜Concisenessã€‚
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="project-table-td">
                                <div class="layui-row">
                                    <div class="layui-col-md12 layui-col-xs12">
                                        <div class="layui-row">
                                            <div class="layui-col-md12">
                                                <a target="_blank"
                                                   href="https://github.com/wuyouzhuguli/Material-Design">Material
                                                    Design</a>
                                            </div>
                                            <div class="project-desc">
                                                Leanoteåšå®¢ä¸»é¢˜Material Designã€‚
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                            <td class="project-table-td">
                                <div class="layui-row">
                                    <div class="layui-col-md12 layui-col-xs12">
                                        <div class="layui-row">
                                            <div class="layui-col-md12">
                                                <a target="_blank"
                                                   href="https://github.com/wuyouzhuguli/Summer">Summer</a>
                                            </div>
                                            <div class="project-desc">
                                                Leanoteåšå®¢ä¸»é¢˜ğŸŒ´Summerã€‚
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

    </div>
</div>

<script th:src="@{/static/js/jquery-3.4.1.js}"></script>
<script th:src="@{/static/js/jquery.nicescroll.js}"></script>
<script th:src="@{/static/layuiadmin/layui/layui.js}"></script>
<script th:src="@{/static/layuiadmin/config.js}"></script>
<script th:src="@{/static/dream/localhost.js}"></script>
<script data-th-inline="none" type="text/javascript">

    $(document).ready(function(){
        $("html").niceScroll();
    });

    /*å·²ç¡®å®š è°¨æ…æ›´æ”¹*/
    var myChart = echarts.init(document.getElementById('leftChart'),'macarons');
    // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®
    option = {
        title: {
            text: 'æ—¥è®¿é—®æ›²çº¿'
        },
        tooltip: {},
        legend: {
            data:['è¯¥æ—¥è®¿é—®é‡']
        },
        xAxis: {
            /*ä¸‹é¢è¿™å¥æ˜¯è®¾ç½®æ¨ªåæ ‡çš„æ–‡å­—å…¨éƒ¨æ˜¾ç¤ºï¼Œä¸é—´éš”*/
            axisLabel:{interval:0},
            data: []
        },
        grids: {
            show: true,
            borderWidth: 0,
            backgroundColor: '#fff',
            shadowColor: 'rgba(0, 0, 0, 0.3)',
            shadowBlur: 2
        },
        yAxis: {},
        series: [{
            smooth:true,
            name: 'è¯¥æ—¥è®¿é—®é‡',
            type: 'line',
            itemStyle : { normal: {label : {show: true}}},
            data: []
        }],
    };

    //æ•°æ®åŠ è½½å®Œä¹‹å‰å…ˆæ˜¾ç¤ºä¸€æ®µç®€å•çš„loadingåŠ¨ç”»
    myChart.showLoading();
    //æ—¥æœŸæ•°ç»„ï¼ˆå®é™…ç”¨æ¥ç››æ”¾Xè½´åæ ‡å€¼ï¼‰
    var xvalues=[];
    //æ•°é‡æ•°ç»„ï¼ˆå®é™…ç”¨æ¥ç››æ”¾Yåæ ‡å€¼ï¼‰
    var yvalues=[];
    $.ajax({
        type: "GET",
        async: true,
        url: host+"admin/sys/log",
        dataType: 'json',
        data: {},
        success : function (result) {
            //è¯·æ±‚æˆåŠŸæ—¶æ‰§è¡Œè¯¥å‡½æ•°å†…å®¹ï¼Œresultå³ä¸ºæœåŠ¡å™¨è¿”å›çš„jsonå¯¹è±¡
            if (result) {
                for (var i = 0; i < result.length; i++) {
                    xvalues.push(result[i].someDay);
                }
                for (var i = 0; i <result.length; i++) {
                    yvalues.push(result[i].recordCount);
                }
                myChart.hideLoading();
                myChart.setOption({
                    xAxis: {
                        data: xvalues
                    },
                    series:[{
                        type: 'line',
                        name: "è¯¥æ—¥è®¿é—®é‡",
                        data: yvalues,
                        showSymbol: true,
                        animationEasing: 'linear',
                        animationDuration: 1000,
                    }],
                });
            }
        },
        //è¯·æ±‚å¤±è´¥æ—¶æ‰§è¡Œè¯¥å‡½æ•°
        error : function() {
            layer.alert("å›¾è¡¨æ•°æ®è¯·æ±‚å¤±è´¥äº†ï¼ˆâ•¯' - ')â•¯ï¼ˆ â”»â”â”»", { icon: 2, title: "æç¤ºä¿¡æ¯", offset: "auto", skin: 'layui-layer-molv' });
            myChart.hideLoading();
        }
    });
    myChart.setOption(option);

</script>
</body>
</html>